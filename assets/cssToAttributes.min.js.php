<?php

/*
 * CSS to Attributes addon for Bear Framework
 * https://github.com/ivopetkov/css-to-attributes-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var cssToAttributes=void 0!==cssToAttributes?cssToAttributes:function(){var t=document.head,e="--css-to-attribute-".length,n=new RegExp("--css-to-attribute-.*?:","g"),r=[],i=[],o=[],s=[],a=[],u=function(t){for(var e=0;e<t.length;e++){var o=t[e];if(4===o.type)u(o.cssRules);else if(1===o.type){var s=o.cssText;if(-1!==s.indexOf("--css-to-attribute-")){var a=o.selectorText,c=r.indexOf(a);-1===c&&(r.push(a),i.push([]),c=r.indexOf(a));for(var f=i[c],d=s.match(n),v=0;v<d.length;v++){var l=d[v].replace(":","").trim();-1===f.indexOf(l)&&f.push(l)}}}}},c=function(t){for(var e=document.styleSheets,n=0;n<e.length;n++){var r=e[n],i=r.ownerNode.outerHTML;if(!t||void 0===a[n]||a[n]!==i){try{u(r.cssRules)}catch(t){}a[n]=i}}},f=function(){for(var t=0;t<r.length;t++)for(var e=r[t],n=i[t],a=document.querySelectorAll(e),u=0;u<a.length;u++){var c=a[u],f=o.indexOf(c);-1===f&&(o.push(c),s.push([]),f=o.indexOf(c));for(var d=s[f],v=0;v<n.length;v++){var l=n[v];-1===d.indexOf(l)&&d.push(l)}}},d=function(t){for(var e=["!",";","{","}",'"',"'"],n=0;n<e.length;n++){var r=e[n];t=t.split("\\"+r).join(r)}return t},v=function(){for(var t=[],n=0;n<o.length;n++){var r=o[n];if(document.contains(r)){for(var i=!1,a=s[n],u=getComputedStyle(r),c=0;c<a.length;c++){var f=a[c],v=d(u.getPropertyValue(f).trim()),l=f.substring(e);""===v?null!==r.getAttribute(l)&&(r.removeAttribute(l),i=!0):r.getAttribute(l)!==v&&(r.setAttribute(l,v),i=!0)}i&&t.push(r)}}if(t.length>0){var h=new Event("css-to-attributes-change");h.elements=t,window.dispatchEvent(h)}},l=!1,h=function(){l||(l=!0,window.addEventListener("resize",(function(){f(),v()})),window.addEventListener("load",(function(){c(!0),f(),v()})),window.addEventListener("orientationchange",(function(){f(),v()})),"undefined"!=typeof MutationObserver&&new MutationObserver((function(e){for(var n=!1,r=!1,i=0;i<e.length;i++){var a=e[i],u=a.target;if(t.contains(u)){n=!0,r=!0;break}if(!r)if("attributes"===a.type){var d=o.indexOf(u);-1!==d?-1===s[d].indexOf("--css-to-attribute-"+a.attributeName)&&(r=!0):r=!0}else r=!0}n&&c(!0),r&&(f(),v())})).observe(document,{childList:!0,subtree:!0,attributes:!0}))};return document.addEventListener("readystatechange",()=>{h(),c(!0),f(),v()}),"complete"===document.readyState&&h(),c(!0),f(),v(),{run:function(t){c(void 0===t||!t),f(),v()}}}();
EOT;
