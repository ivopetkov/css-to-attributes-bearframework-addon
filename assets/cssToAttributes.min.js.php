<?php

/*
 * CSS to Attributes addon for Bear Framework
 * https://github.com/ivopetkov/css-to-attributes-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var cssToAttributes=void 0!==cssToAttributes?cssToAttributes:function(){var t=document.head,e="--css-to-attribute-".length,n=new RegExp("--css-to-attribute-.*?:","g"),r=[],i=[],o=[],u=[],a=[],s=function(t){for(var e=0;e<t.length;e++){var o=t[e];if(4===o.type)s(o.cssRules);else if(1===o.type){var u=o.cssText;if(-1!==u.indexOf("--css-to-attribute-")){var a=o.selectorText,l=r.indexOf(a);-1===l&&(r.push(a),i.push([]),l=r.indexOf(a));for(var c=i[l],d=u.match(n),f=0;f<d.length;f++){var v=d[f].replace(":","").trim();-1===c.indexOf(v)&&c.push(v)}}}}},l=null,c=function(t){t&&!1===l||(l=t)},d=function(t){for(var e=document.styleSheets,n=0;n<e.length;n++){var r=e[n],i=r.ownerNode.outerHTML;if(!t||void 0===a[n]||a[n]!==i){try{s(r.cssRules)}catch(t){}a[n]=i}}},f=null,v=function(){f=!0},h=function(){for(var t=0;t<r.length;t++)for(var e=r[t],n=i[t],a=document.querySelectorAll(e),s=0;s<a.length;s++){var l=a[s],c=o.indexOf(l);-1===c&&(o.push(l),u.push([]),c=o.indexOf(l));for(var d=u[c],f=0;f<n.length;f++){var v=n[f];-1===d.indexOf(v)&&d.push(v)}}},g=function(t){for(var e=["!",";","{","}",'"',"'"],n=0;n<e.length;n++){var r=e[n];t=t.split("\\"+r).join(r)}return t},m=null,b=function(){m=!0},w=function(){for(var t=[],n=0;n<o.length;n++){var r=o[n];if(document.contains(r)){for(var i=!1,a=u[n],s=getComputedStyle(r),l=0;l<a.length;l++){var c=a[l],d=g(s.getPropertyValue(c).trim()),f=c.substring(e);""===d?null!==r.getAttribute(f)&&(r.removeAttribute(f),i=!0):r.getAttribute(f)!==d&&(r.setAttribute(f,d),i=!0)}i&&t.push(r)}}if(t.length>0){var v=new Event("css-to-attributes-change");v.elements=t,window.dispatchEvent(v)}};(window.addEventListener("resize",(function(){v(),b()})),window.addEventListener("load",(function(){c(!0),v(),b()})),window.addEventListener("orientationchange",(function(){v(),b()})),"undefined"!=typeof MutationObserver)&&new MutationObserver((function(e){for(var n=!1,r=!1,i=0;i<e.length;i++){var a=e[i],s=a.target;if(t.contains(s)){n=!0,r=!0;break}if(!r)if("attributes"===a.type){var l=o.indexOf(s);-1!==l?-1===u[l].indexOf("--css-to-attribute-"+a.attributeName)&&(r=!0):r=!0}else r=!0}n&&c(!0),r&&(v(),b())})).observe(document,{childList:!0,subtree:!0,attributes:!0});var p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},x=function(){"loading"===document.readyState&&(c(!0),v(),b()),null!==l&&(d(l),l=null),null!==f&&(h(),f=null),null!==m&&(w(),m=null),p(x)};return x(),document.addEventListener("readystatechange",()=>{d(!1),h(),w()}),"complete"===document.readyState&&(d(!1),h(),w()),{run:function(t){c(void 0===t||!t),v(),b()}}}();
EOT;
