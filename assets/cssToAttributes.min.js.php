<?php

/*
 * CSS to Attributes addon for Bear Framework
 * https://github.com/ivopetkov/css-to-attributes-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var cssToAttributes=void 0!==cssToAttributes?cssToAttributes:function(){var t=document.head,e="--css-to-attribute-".length,n=new RegExp("--css-to-attribute-.*?:","g"),r=[],i=[],o=[],a=[],s=[],u=function(t){for(var e=0;e<t.length;e++){var o=t[e];if(4===o.type)u(o.cssRules);else if(1===o.type){var a=o.cssText;if(-1!==a.indexOf("--css-to-attribute-")){var s=o.selectorText,c=r.indexOf(s);-1===c&&(r.push(s),i.push([]),c=r.indexOf(s));for(var f=i[c],d=a.match(n),v=0;v<d.length;v++){var l=d[v].replace(":","").trim();-1===f.indexOf(l)&&f.push(l)}}}}},c=function(t){for(var e=document.styleSheets,n=0;n<e.length;n++){var r=e[n],i=r.ownerNode.outerHTML;if(!t||void 0===s[n]||s[n]!==i){try{u(r.cssRules)}catch(t){}s[n]=i}}},f=function(){for(var t=0;t<r.length;t++)for(var e=r[t],n=i[t],s=document.querySelectorAll(e),u=0;u<s.length;u++){var c=s[u],f=o.indexOf(c);-1===f&&(o.push(c),a.push([]),f=o.indexOf(c));for(var d=a[f],v=0;v<n.length;v++){var l=n[v];-1===d.indexOf(l)&&d.push(l)}}},d=function(t){for(var e=["!",";","{","}",'"',"'"],n=0;n<e.length;n++){var r=e[n];t=t.split("\\"+r).join(r)}return t},v=function(){for(var t=0;t<o.length;t++){var n=o[t];if(document.contains(n))for(var r=a[t],i=getComputedStyle(n),s=0;s<r.length;s++){var u=r[s],c=d(i.getPropertyValue(u).trim()),f=u.substring(e);""===c?null!==n.getAttribute(f)&&n.removeAttribute(f):n.getAttribute(f)!==c&&n.setAttribute(f,c)}}},l=!1,h=function(){l||(l=!0,window.addEventListener("resize",(function(){f(),v()})),window.addEventListener("load",(function(){c(!0),f(),v()})),window.addEventListener("orientationchange",(function(){f(),v()})),"undefined"!=typeof MutationObserver&&new MutationObserver((function(e){for(var n=!1,r=!1,i=0;i<e.length;i++){var s=e[i],u=s.target;if(t.contains(u)){n=!0,r=!0;break}if(!r)if("attributes"===s.type){var d=o.indexOf(u);-1!==d?-1===a[d].indexOf("--css-to-attribute-"+s.attributeName)&&(r=!0):r=!0}else r=!0}n&&c(!0),r&&(f(),v())})).observe(document,{childList:!0,subtree:!0,attributes:!0}))};return document.addEventListener("readystatechange",()=>{h(),c(!0),f(),v()}),"complete"===document.readyState&&h(),c(!0),f(),v(),{run:function(t){c(void 0===t||!t),f(),v()}}}();
EOT;
